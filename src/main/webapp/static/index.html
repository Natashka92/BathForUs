<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>Бани для нас</title>
    <link rel="icon" type="image/ico" href="static/img/broom.ico"/>
    <link href='https://fonts.googleapis.com/css?family=Marck+Script' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="static/bower_components/angular-material/angular-material.min.css">
    <link rel="stylesheet" href="static/bower_components/angular-material-data-table/dist/md-data-table.min.css">
    <link rel="stylesheet" href="static/css/style.css">


    <script src="static/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="static/bower_components/angular/angular.min.js"></script>
    <script src="static/bower_components/angular-route/angular-route.min.js"></script>
    <script src="static/bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="static/bower_components/angular-aria/angular-aria.min.js"></script>
    <script src="static/bower_components/angular-messages/angular-messages.min.js"></script>
    <script src="static/bower_components/angular-cookies/angular-cookies.min.js"></script>
    <script src="static/bower_components/angular-material/angular-material.min.js"></script>
    <script src="static/bower_components/angular-material-data-table/dist/md-data-table.js"></script> <!-- min. -->

    <script src="static/js/app.js"></script>
    <script src="static/js/libs/textAngular.min.js"></script>
    <script src="static/js/libs/angular-sanitize.min.js"></script>

    <script src="static/js/controller/BathListCtrl.js"></script>
    <script src="static/js/controller/BathDetailDialogCtrl.js"></script>
    <script src="static/js/controller/BathAddDialogCtrl.js"></script>
    <script src="static/js/controller/ServiceAddDialogCtrl.js"></script>
    <script src="static/js/controller/ServiceListCtrl.js"></script>
    <script src="static/js/controller/MainMenuCtrl.js"></script>
    <script src="static/js/controller/LoginCtrl.js"></script>
    <script src="static/js/service/BathRepositoryFactory.js"></script>
    <script src="static/js/service/ServiceRepositoryFactory.js"></script>

</head>
<body>

<md-toolbar ng-controller="MainMenuCtrl" layout="row" class="md-whiteframe-z1">
    <div class="md-toolbar-tools">

        <md-button class="md-icon-button logo" ng-click="goto('/bathes')">
            <md-icon md-svg-icon="broom"></md-icon>
        </md-button>

        <h2 class="logo-text">#BathForUs</h2>

        <md-button aria-label="Список бань" ng-click="goto('/bathes')">
            <span ng-class="setClassByUrl('md-subhead', '/bathes')">Список бань</span>
        </md-button>

        <md-button aria-label="Перечень услуг" ng-click="goto('/services')">
            <span ng-class="setClassByUrl('md-subhead', '/services')">Перечень услуг</span>
        </md-button>

        <span flex></span>

        <p class="md-body-1" ng-show="$root.username">Добро пожаловать, {{ $root.username }}</p>

        <md-menu ng-controller="LoginCtrl" ng-hide="$root.username">
            <md-button aria-label="Войти" ng-click="$mdOpenMenu($event)">
                Войти
            </md-button>

            <md-menu-content>
                <md-content layout-gt-sm="column" layout-padding>
                    <div ng-form name="loginForm">

                        <md-input-container class="md-block flex-gt-sm">
                            <label>Логин</label>
                            <input name="login" ng-model="user.login" class="md-input" required
                                   ng-disabled="loginInProgress">
                            <div ng-messages="loginForm.login.$error" md-auto-hide="false">
                                <div ng-message="required">
                                    Введите логин
                                </div>
                            </div>
                        </md-input-container>

                        <md-input-container class="md-block flex-gt-sm" ng-disabled="loginInProgress">
                            <label>Пароль</label>
                            <input name="password" ng-model="user.password" type="password" class="md-input"
                                   required
                                   ng-disabled="loginInProgress">
                            <div ng-messages="loginForm.password.$error" md-auto-hide="false">
                                <div ng-message="required">
                                    Введите пароль
                                </div>
                            </div>
                        </md-input-container>

                        <div layout="row" layout-sm="column" layout-margin>
                            <md-button md-prevent-menu-close ng-click="login()" class="md-raised md-primary" flex
                                       ng-disabled="loginForm.login.$invalid || loginForm.password.$invalid"
                                       ng-hide="loginInProgress">
                                Login
                            </md-button>
                            <div layout="row" ng-show="loginInProgress" layout-align="start center">
                                <md-progress-circular md-mode="indeterminate"></md-progress-circular>
                                <h1 class="md-caption">Аутентификация</h1>
                            </div>
                        </div>
                    </div>
                </md-content>
            </md-menu-content>
        </md-menu>

        <span ng-controller="LoginCtrl" ng-show="$root.username">
            <md-menu ng-hide="logoutInProgress">
                <md-button aria-label="Выйти" ng-click="logout()" ng-disabled="logoutInProgress">
                    Выйти
                </md-button>
                <md-menu-content></md-menu-content>
            </md-menu>
            <span layout="row" layout-align="center center" ng-show="logoutInProgress">
                <md-progress-circular md-mode="indeterminate" class="md-hue-1"></md-progress-circular>
                <h6 class="md-caption">Выход</h6>
            </span>
        </span>

        <span></span>

    </div>
</md-toolbar>

<div ng-view></div>

</body>
</html>